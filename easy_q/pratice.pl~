use strict;
use warnings;

my $path_to_file = '~/learning_repos/perl/parse_me_files/ip_logs.txt';
my %log_table;

open($wf, '<', $path_to_file) or die "Can't find file, $!";

while(my $line = <$wf>) {
	chomp $line;
	while(my $ip ~= m/\d+{1,3}\.\d+{1,3}\.\d+{1,3}\.\d+{1,3}/g) {
		$log_table{$ip}++;
	}
}

foreach(my $key, (key $log_table)) {
	print "$key = $log_table{$key}";
	my $current_greatest = 0;
	if ($log_table{$key} > $current_greatest) {
		$current_greatest = $log_table{$key};
	}
}

foreach $key (key $log_table) {
	if ($current_greatest = $log_table{$key}) {
		print "$key has most occurences. total: $log_table{$key};
	}
}

